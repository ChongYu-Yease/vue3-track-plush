var e=function(e){var t=new XMLHttpRequest;if(t.timeout=1e4,!e.baseURL||!e.url)throw new Error("baseUrl属性或者url不能为空!");var n="".concat(e.baseURL?e.baseURL:"").concat(e.url?e.url:""),a=e.method.toUpperCase()||"POST";t.open(a,n,!0),t.withCredentials=!0,t.setRequestHeader("Content-type","application/json;charset=UTF-8"),t.send(JSON.stringify(e.data||{}))},t=function(){function t(e){this.trackPlushConfig=e||{}}return t.prototype.handleClickEvent=function(e){var t=this;if("customize"===e.type)this.handleSendTrack({buttonName:e.buttonName,userAgent:this.trackPlushConfig.userAgent||navigator.userAgent,pageUrl:this.trackPlushConfig.pageUrl||window.location.href,projectName:this.trackPlushConfig.projectName,actionType:"点击事件"});else{var n=e.el.attributes["track-params"],a=n?n.value:null;e.el.addEventListener("click",(function(){t.handleSendTrack({buttonName:a,userAgent:t.trackPlushConfig.userAgent||navigator.userAgent,pageUrl:t.trackPlushConfig.pageUrl||window.location.href,projectName:t.trackPlushConfig.projectName,actionType:"点击事件"})}))}},t.prototype.handleSendTrack=function(t){e({baseURL:this.trackPlushConfig.baseURL,url:this.trackPlushConfig.url,method:this.trackPlushConfig.method||"POST",data:t})},t}(),n=function(){function t(e){this.trackPlushConfig=e||{}}return t.prototype.handleBrowseEvent=function(e){if("customize"===e.type)this.handleSendTrack({pageName:e.pageName,userAgent:this.trackPlushConfig.userAgent||navigator.userAgent,pageUrl:this.trackPlushConfig.pageUrl||window.location.href,projectName:this.trackPlushConfig.projectName,actionType:"浏览事件"});else{var t=e.el.attributes["track-params"],n=t?t.value:null;this.handleSendTrack({pageName:n,userAgent:this.trackPlushConfig.userAgent||navigator.userAgent,pageUrl:this.trackPlushConfig.pageUrl||window.location.href,projectName:this.trackPlushConfig.projectName,actionType:"浏览事件"})}},t.prototype.handleSendTrack=function(t){e({baseURL:this.trackPlushConfig.baseURL,url:this.trackPlushConfig.url,method:this.trackPlushConfig.method||"POST",data:t})},t}(),a=function(e){new t(e).handleClickEvent({buttonName:e.buttonName,type:"customize"})},r=function(e){new n(e).handleBrowseEvent({pageName:e.pageName,type:"customize"})},o={install:function(e,a){e.directive("track",{mounted:function(e,r){console.log("binding",r),r.arg.split("|").forEach((function(r){"click"===r?new t(a).handleClickEvent({el:e,type:"instruction"}):"browse"===r&&new n(a).handleBrowseEvent({type:"instruction",el:e})}))}})}};export{r as browseEvent,a as clickEvent,o as default};
