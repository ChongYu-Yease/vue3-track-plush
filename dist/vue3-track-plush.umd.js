var e,t;e=this,t=function(e){"use strict";var t=function(e){var t=new XMLHttpRequest;if(t.timeout=1e4,!e.baseURL||!e.url)throw new Error("baseUrl属性或者url不能为空!");var n="".concat(e.baseURL?e.baseURL:"").concat(e.url?e.url:""),a=e.method.toUpperCase()||"POST";t.open(a,n,!0),t.withCredentials=!0,t.setRequestHeader("Content-type","application/json;charset=UTF-8"),t.send(JSON.stringify(e.data||{}))},n=function(){function e(e){this.trackPlushConfig=e||{}}return e.prototype.handleClickEvent=function(e){var t=this;if("customize"===e.type)this.handleSendTrack({buttonName:e.buttonName,userAgent:this.trackPlushConfig.userAgent||navigator.userAgent,pageUrl:this.trackPlushConfig.pageUrl||window.location.href,projectName:this.trackPlushConfig.projectName,actionType:"点击事件"});else{var n=e.el.attributes["track-params"],a=n?n.value:null;e.el.addEventListener("click",(function(){t.handleSendTrack({buttonName:a,userAgent:t.trackPlushConfig.userAgent||navigator.userAgent,pageUrl:t.trackPlushConfig.pageUrl||window.location.href,projectName:t.trackPlushConfig.projectName,actionType:"点击事件"})}))}},e.prototype.handleSendTrack=function(e){t({baseURL:this.trackPlushConfig.baseURL,url:this.trackPlushConfig.url,method:this.trackPlushConfig.method||"POST",data:e})},e}(),a=function(){function e(e){this.trackPlushConfig=e||{}}return e.prototype.handleBrowseEvent=function(e){if("customize"===e.type)this.handleSendTrack({pageName:e.pageName,userAgent:this.trackPlushConfig.userAgent||navigator.userAgent,pageUrl:this.trackPlushConfig.pageUrl||window.location.href,projectName:this.trackPlushConfig.projectName,actionType:"浏览事件"});else{var t=e.el.attributes["track-params"],n=t?t.value:null;this.handleSendTrack({pageName:n,userAgent:this.trackPlushConfig.userAgent||navigator.userAgent,pageUrl:this.trackPlushConfig.pageUrl||window.location.href,projectName:this.trackPlushConfig.projectName,actionType:"浏览事件"})}},e.prototype.handleSendTrack=function(e){t({baseURL:this.trackPlushConfig.baseURL,url:this.trackPlushConfig.url,method:this.trackPlushConfig.method||"POST",data:e})},e}(),o={install:function(e,t){e.directive("track",{mounted:function(e,o){console.log("binding",o),o.arg.split("|").forEach((function(o){"click"===o?new n(t).handleClickEvent({el:e,type:"instruction"}):"browse"===o&&new a(t).handleBrowseEvent({type:"instruction",el:e})}))}})}};e.browseEvent=function(e){new a(e).handleBrowseEvent({pageName:e.pageName,type:"customize"})},e.clickEvent=function(e){new n(e).handleClickEvent({buttonName:e.buttonName,type:"customize"})},e.default=o,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).RollupVue3TsTemplate={});
