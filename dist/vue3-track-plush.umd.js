var e,t;e=this,t=function(e){"use strict";var t=function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},t.apply(this,arguments)},n=function(e){var t=new XMLHttpRequest;if(t.timeout=1e4,!e.baseURL||!e.url)throw new Error("baseUrl属性或者url不能为空!");var n="".concat(e.baseURL?e.baseURL:"").concat(e.url?e.url:""),r=e.method.toUpperCase()||"POST";t.open(r,n,!0),t.withCredentials=!0,t.setRequestHeader("Content-type","application/json;charset=UTF-8"),t.send(JSON.stringify(e.data||{}))},r=function(){function e(e){this.trackPlushConfig=e}return e.prototype.handleClickEvent=function(e){var n=this;if("customize"===e.type){var r=JSON.parse(JSON.stringify(e));delete r.type,this.handleSendTrack(t({userAgent:this.trackPlushConfig.userAgent||navigator.userAgent,pageUrl:this.trackPlushConfig.pageUrl||window.location.href,projectName:this.trackPlushConfig.projectName,actionType:"点击事件"},r))}else e.el.addEventListener("click",(function(){var r=e.VNode.props["track-params"];"string"==typeof r?n.handleSendTrack({buttonName:r,userAgent:n.trackPlushConfig.userAgent||navigator.userAgent,pageUrl:n.trackPlushConfig.pageUrl||window.location.href,projectName:n.trackPlushConfig.projectName,actionType:"点击事件"}):n.handleSendTrack(t({userAgent:n.trackPlushConfig.userAgent||navigator.userAgent,pageUrl:n.trackPlushConfig.pageUrl||window.location.href,projectName:n.trackPlushConfig.projectName,actionType:"点击事件"},r))}))},e.prototype.handleSendTrack=function(e){n({baseURL:this.trackPlushConfig.baseURL,url:this.trackPlushConfig.url,method:this.trackPlushConfig.method||"POST",data:e})},e}(),a=function(){function e(e){this.trackPlushConfig=e}return e.prototype.handleBrowseEvent=function(e){if("customize"===e.type){var n=JSON.parse(JSON.stringify(e));delete n.type,this.handleSendTrack(t({userAgent:this.trackPlushConfig.userAgent||navigator.userAgent,pageUrl:this.trackPlushConfig.pageUrl||window.location.href,projectName:this.trackPlushConfig.projectName,actionType:"浏览事件"},n))}else{var r=e.VNode.props["track-params"];"string"==typeof r?this.handleSendTrack({pageName:r,userAgent:this.trackPlushConfig.userAgent||navigator.userAgent,pageUrl:this.trackPlushConfig.pageUrl||window.location.href,projectName:this.trackPlushConfig.projectName,actionType:"浏览事件"}):this.handleSendTrack(t({userAgent:this.trackPlushConfig.userAgent||navigator.userAgent,pageUrl:this.trackPlushConfig.pageUrl||window.location.href,projectName:this.trackPlushConfig.projectName,actionType:"浏览事件"},r))}},e.prototype.handleSendTrack=function(e){n({baseURL:this.trackPlushConfig.baseURL,url:this.trackPlushConfig.url,method:this.trackPlushConfig.method||"POST",data:e})},e}(),o=["baseURL","url"],i={install:function(e,t){e.directive("track",{mounted:function(e,n,o){n.arg.split("|").forEach((function(n){"click"===n?new r(t).handleClickEvent({el:e,VNode:o,type:"instruction"}):"browse"===n&&new a(t).handleBrowseEvent({type:"instruction",VNode:o})}))}})}};e.browseEvent=function(e){var n={};Object.keys(e).forEach((function(t){o.includes(t)||(n[t]=e[t])})),new a(e).handleBrowseEvent(t(t({},n),{type:"customize"}))},e.clickEvent=function(e){var n={};Object.keys(e).forEach((function(t){o.includes(t)||(n[t]=e[t])})),new r(e).handleClickEvent(t(t({},n),{type:"customize"}))},e.default=i,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Vue3TrackPlush={});
